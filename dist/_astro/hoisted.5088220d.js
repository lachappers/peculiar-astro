document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})});const M="aW5mb0BwZWN1bGlhcmR5bmFtaWNzLmNvLnVr",k=document.querySelectorAll(".email-link");k.forEach(e=>{e.setAttribute("href","mailto:".concat(atob(M)).concat("?subject=I've got a Peculiar Query"))});const c=document.querySelector("#main-navigation"),p=c.querySelector("ul"),m=[...document.querySelectorAll(".has-dropdown button")],q=()=>{const e=c.querySelectorAll("nav > ul"),t=window.location.pathname;e.forEach(o=>{[...o.querySelectorAll('a:not([rel*="external"])')].forEach(s=>{(t.includes(s.pathname.replaceAll("/",""))&&s.textContent!=="Home"||s.textContent==="Home"&&t==="/")&&(s.classList.add("is-active"),s.setAttribute("aria-current","page"))})})},E=()=>{const e=c.getBoundingClientRect().width,t=document.querySelector(".desktop-menu").getBoundingClientRect().width,o=350,n=Math.round(t)+o;n>=e?(c.classList.remove("is-desktop"),c.classList.add("is-mobile")):n<=e&&(c.classList.add("is-desktop"),c.classList.remove("is-mobile"))},D=e=>e.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth),S=e=>{const t=e.parentNode.querySelector("ul");e.classList.add("show"),e.setAttribute("aria-expanded","true"),D(t)&&(t.style.left="auto")},w=e=>{e.classList.remove("show"),e.setAttribute("aria-expanded","false")},b=()=>{for(let e=0;e<m.length;e++)w(m[e])},C=e=>{e.target.getAttribute("aria-expanded")==="false"?(b(),S(e.target)):w(e.target)};p&&p.addEventListener("keydown",e=>{const t=e.target,o=t.closest("li"),n=[...p.querySelectorAll(".menu-item")],s=t.closest(".has-dropdown button"),d=t.closest(".has-dropdown li"),L=n.findIndex(a=>a===o),l=e.key;let r;if(l==="ArrowRight"&&(n.indexOf(o)===n.length-1?r=n[0]:r=n[L+1]),l==="ArrowLeft"&&(n.indexOf(o)===0?r=n[n.length-1]:r=n[L-1]),l==="Escape"&&(r=n[0]),s){const a=s.nextElementSibling.querySelector("li");l==="ArrowDown"&&(e.preventDefault(),S(s),r=a),l==="Escape"&&w(s)}if(d){const a=d.parentNode,i=[...a.querySelectorAll("li")],y=i.findIndex(A=>A===d);l==="ArrowDown"&&(e.preventDefault(),i.indexOf(d)===i.length-1?r=i[0]:r=i[y+1]),l==="ArrowUp"&&(e.preventDefault(),i.indexOf(d)===0?r=i[i.length-1]:r=i[y-1]),l==="Escape"&&(r=a.previousElementSibling.parentNode,b())}r&&r.querySelector("a, button, input").focus()});m&&m.forEach(e=>{e.addEventListener("click",C)});q();E();window.addEventListener("resize",E);window.addEventListener("click",e=>{const t=e.target;!t.hasAttribute("aria-haspopup")&&!t.classList.contains("submenu-item")&&b()});const v=document.querySelector("body"),x=document.querySelectorAll(".modal");let h,g;const I=e=>{e.remove(),v.appendChild(e)},T=e=>[...e.querySelectorAll('a, button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter(t=>!t.hasAttribute("disabled")),B=(e,t)=>{const o=T(t),n=o[0],s=o[o.length-1];document.activeElement===s&&e.key==="Tab"&&!e.shiftKey&&(e.preventDefault(),n.focus()),document.activeElement===n&&e.key==="Tab"&&e.shiftKey&&(e.preventDefault(),s.focus())},N=e=>{const t=e.querySelector("h3");e.classList.add("show"),v.classList.add("modal-is-active"),t.focus(),h=new AbortController,g=new AbortController,document.addEventListener("keydown",o=>B(o,e),{signal:h.signal}),e.addEventListener("keydown",o=>{o.key==="Escape"&&f()},{signal:g.signal})},f=e=>{x.forEach(t=>{t.classList.remove("show");const o=t.getAttribute("aria-labelledby");document.querySelector(`#${o}`).focus({preventScroll:!0}),h.abort(),g.abort()}),v.classList.remove("modal-is-active")};x.forEach(e=>{const t=e.getAttribute("aria-labelledby"),o=e.querySelector(".modal__close button");document.querySelector(`#${t}`).addEventListener("click",()=>N(e)),o.addEventListener("click",f),e.addEventListener("click",s=>{s.target.closest(".modal__content")||f()}),I(e)});window.closeModal=f;const u=document.querySelector(".responsive-toggle"),W=e=>{e.setAttribute("aria-expanded",!0),e.setAttribute("aria-label","Close menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--action-color)" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/></svg>'},H=e=>{e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Open menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--action-color)" d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>'};u.addEventListener("click",e=>{const t=document.querySelector(".mobile-menu");console.log(u),t.classList.toggle("show"),t.classList.contains("show")?W(u):H(u)});
