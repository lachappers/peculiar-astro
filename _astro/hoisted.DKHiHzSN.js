document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})});const q="aW5mb0BwZWN1bGlhcmR5bmFtaWNzLmNvLnVr",M=document.querySelectorAll(".email-link");M.forEach(e=>{e.setAttribute("href","mailto:".concat(atob(q)).concat("?subject=I've got a Peculiar Query"))});const c=document.querySelector("#main-navigation"),p=c?.querySelector("ul"),g=[...document.querySelectorAll(".has-dropdown button")],x=()=>{const e=c?.querySelectorAll("nav > ul"),t=window.location.pathname;e?.forEach(n=>{[...n.querySelectorAll('a:not([rel*="external"])')].forEach(r=>{(t.includes(r.pathname.replaceAll("/",""))&&r.textContent!=="Home"||r.textContent==="Home"&&t==="/")&&(r.classList.add("is-active"),r.setAttribute("aria-current","page"))})})},E=()=>{const e=c.getBoundingClientRect().width,t=document.querySelector(".desktop-menu").getBoundingClientRect().width,o=Math.round(t)+350;o>=e?(c.classList.remove("is-desktop"),c.classList.add("is-mobile")):o<=e&&(c.classList.add("is-desktop"),c.classList.remove("is-mobile"))},D=e=>e.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth),S=e=>{const t=e.parentNode.querySelector("ul");e.classList.add("show"),e.setAttribute("aria-expanded","true"),D(t)&&(t.style.left="auto")},b=e=>{e.classList.remove("show"),e.setAttribute("aria-expanded","false")},v=()=>{for(let e=0;e<g.length;e++)b(g[e])},I=e=>{e.target.getAttribute("aria-expanded")==="false"?(v(),S(e.target)):b(e.target)};p&&p.addEventListener("keydown",e=>{const t=e.target,n=t.closest("li"),o=[...p.querySelectorAll(".menu-item")],r=t.closest(".has-dropdown button"),d=t.closest(".has-dropdown li"),y=o.findIndex(a=>a===n),l=e.key;let s;if(l==="ArrowRight"&&(o.indexOf(n)===o.length-1?s=o[0]:s=o[y+1]),l==="ArrowLeft"&&(o.indexOf(n)===0?s=o[o.length-1]:s=o[y-1]),l==="Escape"&&(s=o[0]),r){const a=r.nextElementSibling.querySelector("li");l==="ArrowDown"&&(e.preventDefault(),S(r),s=a),l==="Escape"&&b(r)}if(d){const a=d.parentNode,i=[...a.querySelectorAll("li")],L=i.findIndex(A=>A===d);l==="ArrowDown"&&(e.preventDefault(),i.indexOf(d)===i.length-1?s=i[0]:s=i[L+1]),l==="ArrowUp"&&(e.preventDefault(),i.indexOf(d)===0?s=i[i.length-1]:s=i[L-1]),l==="Escape"&&(s=a.previousElementSibling.parentNode,v())}s&&s.querySelector("a, button, input").focus()});g&&g.forEach(e=>{e.addEventListener("click",I)});x();E();window.addEventListener("resize",E);window.addEventListener("click",e=>{const t=e.target;!t.hasAttribute("aria-haspopup")&&!t.classList.contains("submenu-item")&&v()});let h=document.querySelectorAll(".modal"),w,u;const B=e=>[...e.querySelectorAll('a, button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])')].filter(t=>!t.hasAttribute("disabled")),C=(e,t)=>{const n=B(t),o=n[0],r=n[n.length-1];document.activeElement===r&&e.key==="Tab"&&!e.shiftKey&&(e.preventDefault(),o.focus()),document.activeElement===o&&e.key==="Tab"&&e.shiftKey&&(e.preventDefault(),r.focus())},k=e=>{const t=e.querySelector("h3"),n=e.querySelector(".modal__inner");e.showModal(),t.focus(),w=new AbortController,u=new AbortController,document.addEventListener("keydown",o=>C(o,e),{signal:w.signal}),e.addEventListener("keydown",o=>{o.key==="Escape"&&f()},{signal:u.signal}),e.addEventListener("click",()=>{f()},{signal:u.signal}),n.addEventListener("click",o=>{o.stopPropagation()},{signal:u.signal})},f=()=>{h.forEach(e=>{const t=e.getAttribute("aria-labelledby");document.querySelector(`#${t}`).focus({preventScroll:!0}),e.close(),w?.abort(),u?.abort()})};h.forEach(e=>{const t=e.getAttribute("aria-labelledby"),n=e.querySelector(".modal__close button"),o=document.querySelector(`#${t}`);if(!o)throw new Error(`Trigger element not found. 

      Did you forget to add a trigger element with id: "${t}"?`);o.addEventListener("click",()=>k(e)),n.addEventListener("click",f)});window.closeModal=f;document.addEventListener("astro:after-swap",()=>{h=document.querySelectorAll(".modal"),h.forEach(e=>{const t=e.getAttribute("aria-labelledby"),n=e.querySelector(".modal__close button"),o=document.querySelector(`#${t}`);if(!o)throw new Error(`Trigger element not found. 

      Did you forget to add a trigger element with id: "${t}"?`);o.addEventListener("click",()=>k(e)),n.addEventListener("click",f)})});const m=document.querySelector(".responsive-toggle"),T=e=>{e.setAttribute("aria-expanded",!0),e.setAttribute("aria-label","Close menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--action-color)" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/></svg>'},W=e=>{e.setAttribute("aria-expanded",!1),e.setAttribute("aria-label","Open menu navigation"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--action-color)" d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>'};m?.addEventListener("click",e=>{const t=document.querySelector(".mobile-menu");console.log(m),t?.classList.toggle("show"),t?.classList.contains("show")?T(m):W(m)});
